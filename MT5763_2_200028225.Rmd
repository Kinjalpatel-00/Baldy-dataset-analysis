---
title: "MT5763_2_200028225 -- CHANGE"
subtitle: "MT5763 : Individual courserwork 2" 
author: "Student ID number : 200028225"
date: October 28, 2020
output: pdf_document
---

Github Link of private repository: [Click here](https://github.com/Kinjalpatel-00/MT5763_2_200028225.git)

```{r setup, include=FALSE}
library(knitr)
```

## Abstract
--------------write general info 

This analytic paper uses the data of hair growth on randomly selected male groups after receiving different male pattern baldness (MPB) treatments over a month. Data wrangling has been down to optimize the dataset in a way which can be easier to read and operate the statistical operations. Fits Liner model in order to determine effects of personâ€™s age over hair growth measurement after receiving different MPB treatments for a month. This study finds that 

---------------Write about results

## Introduction

The male pattern baldness (MPB) has been major concern in global community. The demand of new products and treatments has increased a lot.  The MPB is the most common way to loss hair among men at age of 20-30 and it increased 10% per decade.3 Thus, scientist and researches are using advanced statistical approach to analysis and examine the relationship between hair growth on men of different MPB treatments over their ages. This study helps to find which treatment can be more effective for which group of male population which are more or less totally bald. 
---------------Write about results

## Analysis Description -

We have results of newly invented drug called luxuriant and other 3 existing drugs effect over randomly allocated groups of men. Data wrangling was proces was performed to reshape the data in a form suitable for analysis. The given dataset neither has an extra variable nor any null values which required to be removed, therefore, not a single column or row has removed from original dataset. For further process, the copy of dataset was made, in order to avoid any unintentionally change in original dataset. The wide to long transformation has been implemented to get the optimized version of the data, as it would be clearer to see each row of data as individual person. In order to obtain that, treatment column has added to the data. As result, the newly created dataset has 3 columns, named treatment, hair growth values and age (figure 1). In result, newly created dataset has 400 rows and 3 columns.




```{r out.width = "50%" , echo=FALSE ,fig.align = 'center', fig.cap = "First few rows of newly craeted dataset (wide to long transformation) "}
include_graphics("/Users/kinjalpatel/Desktop/img1.png")
```

The hair growth values has been changed from inches to millimeters to determine more human understandable. Statistical summary and frequency tables for numeric values have been calculated for analysis purpose of the dataset after each operation. The graphs and the results of analysis has discussed in the below section. 

## Results

To determine, if luxuriant treatment is above or beyond the placebo, the series plot has generated. New dataset with only treatments luxuriant and placebo was made to avoid any accidentally manipulation of data with other 2 treatments. 

```{r out.width = "60%" , echo=FALSE ,fig.align = 'center', fig.cap = "Effect of luxuriant treatment over the placbo treatment "}
include_graphics("/Users/kinjalpatel/Desktop/img2.png")
```
As per Figure 2, we can determine that newly created drug is more effective than existing drug called placebo for all age group. Thus, to be more specific for analysis, the statical summary for both treatments have discussed below. 

| Treatment      | Mean       | Std Deviation | Range    | Variance   | Std Error Mean | p Value(Student's t) |
|----------------|------------|---------------|----------|------------|----------------|----------------------|
| luxuriant      | 12.99950   | 7.52583       | 36.40346 | 56.6380857 | 0.75258279     | <.0001               |
| placbo         | 2.485074   | 2.40679       | 13.22991 | 5.79266    | 0.24067941     |               <.0001 |
| BaldBeGone     | 36.1521295 | 19.7447168    | 96.19019 | 389.85384  | 1.97447168     |               <.0001 |
| SkinHeadNoMore | 18.74009   | 11.02093      | 54.30731 | 121.46095  | 1.10209323     | <.0001               |

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Table 1: Statistical summary of Hair growth variable for different treatments

The mean of hair growth variable for luxuriant treatment is 12.99 whereas for placebo treatment it is only 2.48, which implies that average hair growth value(mm) is higher in luxuriant treatment. However, we can see the variance of both treatment which are respectively 56.63 and 5.79, which says that data is more spread out around mean for luxuriant treatment data. The value of standard error for luxuriant treatment is 0.75 which conclude that sample mean is more likely precise estimate of population mean. (Refer to table 1) 



## Software use

## Further research - 

## Conclusion


## References

## Appendices - SAS Code

Code can be reproducible by changing file location. 

```
/* Generated Code (IMPORT) */
/* Source File: Baldy.csv */
/* Source Path: /folders/myfolders/MT5763_2_200028225 */
/* Code generated on: 10/22/20, 4:48 PM */

%web_drop_table(DATA.BALDY);

FILENAME REFFILE '/folders/myfolders/Baldy.csv';

PROC IMPORT DATAFILE=REFFILE
  DBMS=CSV
  OUT=DATA.BALDY;
  GETNAMES=YES;
RUN;

/* View the basic details of dataset */
PROC CONTENTS DATA=DATA.BALDY; 
RUN;

/* Disply the dataset in table format */
%web_open_table(DATA.BALDY);


/* Creating the copy of existing dataset*/
DATA DATA.COPY_DATASET;
SET DATA.BALDY;
RUN;

/*----------------------- SUMMIRINZING DATASET --------------------------------*/

/* Summirizing the numeric variables of different treatments*/
PROC UNIVARIATE DATA= DATA.COPY_DATASET;
VAR LUXURIANT PLACEBO BALDBEGONE SKINHEADNOMORE;
RUN;


/* Summirizing the numeric variables of age when treatment was done*/
PROC UNIVARIATE DATA= DATA.COPY_DATASET;
VAR AGELUXURIANT AGEPLACEBO AGEBALDBEGONE AGESKINHEADNOMORE;
RUN;


/*---------------- CONVERTING THE DATASET TO THREE COLUMNS AGE, HAIR GROWTH VALUE, TREATMENT*/

/* CHANGE DATASET TRANSPOSE WIDE TO LONG  */

/* Creating the seprate dataset of Luxuriant treatment*/
DATA DATA.DATA_LUXURIANT; 
  SET DATA.COPY_DATASET ;
  Treatment = "Luxuriant";
  RENAME AgeLuxuriant = Age;
  RENAME LUXURIANT = HairGrowthValue;
  KEEP AgeLuxuriant LUXURIANT Treatment;
RUN;

/* Creating the seprate dataset of Placebo treatment*/
DATA DATA.DATA_PLACEBO; 
  SET DATA.COPY_DATASET ;
  Treatment = "Placebo";
  RENAME AGEPLACEBO = Age;
  RENAME PLACEBO = HairGrowthValue;
  KEEP AGEPLACEBO PLACEBO Treatment; 
RUN;

/* Creating the seprate dataset of BaldBeGone treatment*/
DATA DATA.DATA_BALDBEGONE; 
  SET DATA.COPY_DATASET ;
  Treatment = "BaldBeGone";
  length Treatment $ 20;
  RENAME AGEBALDBEGONE = Age;
  RENAME BALDBEGONE = HairGrowthValue;
  KEEP AGEBALDBEGONE BALDBEGONE Treatment; 
RUN;

/* Creating the seprate dataset of SkinheadNoMore treatment*/
DATA DATA.DATA_SKINHEADNOMORE; 
  SET DATA.COPY_DATASET ;
  Treatment = "SkinheadNoMore";
  length Treatment $ 20;
  RENAME AGESKINHEADNOMORE = Age;
  RENAME SKINHEADNOMORE = HairGrowthValue;
  KEEP AGESKINHEADNOMORE SKINHEADNOMORE Treatment; 
RUN;

/* Merging all above 4 datasets*/
DATA DATA.TIDY_DATASET;
  length Treatment $ 20;
    SET DATA.DATA_LUXURIANT DATA.DATA_PLACEBO DATA.DATA_BALDBEGONE DATA.DATA_SKINHEADNOMORE ;
RUN;

/* CHANGE HAIR GROTH VALUES(INCHES) TO MILIMIITER*/
DATA DATA.TIDY_DATASET;
  SET DATA.TIDY_DATASET;
  HairGrowthValue = HairGrowthValue * 25.4;
RUN;

/* FREQUENCY TABLES of summery for tidy dataset*/
PROC FREQ DATA=DATA.TIDY_DATASET;
    TABLE Age*HairGrowthValue / CHISQ;
RUN;

/* summerizing tidy dataset */
PROC CONTENTS DATA=DATA.TIDY_DATASET; 
RUN;

/* Basic statistical summery for numeric data */
PROC UNIVARIATE DATA= DATA.TIDY_DATASET;
VAR Age HairGrowthValue;
RUN;

/* ------------- Question 1 ------------- */
/* creating a new dataset for Luxuriant and Placebo Treatments*/
DATA DATA.DATA_q1; 
  SET DATA.TIDY_DATASET;
  WHERE Treatment = "Luxuriant" OR Treatment = "Placebo";
RUN;

/* statistical summery of above dataset */
PROC UNIVARIATE DATA= DATA.DATA_q1;
VAR AGE HAIRGROWTHVALUE;
RUN;

/*Creating a series plot of hair growth for luxuriant treatment and placbo treatment*/
proc template; 
define statgraph sgdesign;
dynamic _AGE _HAIRGROWTHVALUE _TREATMENT _TREATMENT2;
begingraph;
   entrytitle halign=center 'Graph: 1 Effect of luxuriant treatment over the placbo treatment';
   layout lattice / rowdatarange=data columndatarange=data rowgutter=10 columngutter=10;
      layout overlay;
         seriesplot x=_AGE y=_HAIRGROWTHVALUE / group=_TREATMENT curvelabel=_TREATMENT2 name='series' connectorder=xaxis;
      endlayout;
   endlayout;
endgraph;
end;
run;

/* Displaying the above graph */
proc sgrender data=DATA.DATA_q1 template=sgdesign;
dynamic _AGE="AGE" _HAIRGROWTHVALUE="HAIRGROWTHVALUE" _TREATMENT="TREATMENT" _TREATMENT2="TREATMENT";
run;

/* ------------- Question 2 ------------- */

/*Creating a box plot of hair growth for all treatments*/
proc template;
define statgraph sgdesign;
dynamic _HAIRGROWTHVALUE _TREATMENT _TREATMENT2;
begingraph;
   entrytitle halign=center 'Graph: 2 Hair growth effects of different treatments';
   layout lattice / rowdatarange=data columndatarange=data rowgutter=10 columngutter=10;
      layout overlay / xaxisopts=( discreteopts=( tickvaluefitpolicy=splitrotate));
         boxplot x=_TREATMENT y=_HAIRGROWTHVALUE / group=_TREATMENT2 name='box' groupdisplay=Cluster;
      endlayout;
   endlayout;
endgraph;
end;
run;

/* Displying above graph */
proc sgrender data=DATA.TIDY_DATASET template=sgdesign;
dynamic _HAIRGROWTHVALUE="HAIRGROWTHVALUE" _TREATMENT="TREATMENT" _TREATMENT2="TREATMENT";
run;

/* ------------- Question 3 ------------- */
/* graph of age vs different traetments */
proc template;
define statgraph sgdesign;
dynamic _AGE _TREATMENT;
begingraph;
   entrytitle halign=center 'Graph 3: Age over different treatments ';
   layout lattice / rowdatarange=data columndatarange=data rowgutter=10 columngutter=10;
      layout overlay / xaxisopts=( discreteopts=( tickvaluefitpolicy=splitrotate));
         boxplot x=_TREATMENT y=_AGE / name='box' groupdisplay=Cluster;
      endlayout;
   endlayout;
endgraph;
end;
run;

/* Displying above graph */
proc sgrender data=DATA.TIDY_DATASET template=sgdesign;
dynamic _AGE="AGE" _TREATMENT="TREATMENT";
run;

/* fit the model with whole dataset - General Linear model */
PROC GLM data=DATA.TIDY_DATASET outstat=outStat plots=diagnostics;
  CLASS age;
  MODEL HAIRGROWTHVALUE = age / solution clparm;
  ODS output fFitStatistics = modelFit ParameterEstimates =parEsts;
RUN;
Quit;

/* for above dataset: scatter plot with fitted linear regression with prediction interval(CLI) and  confidence interval(CLM)*/
PROC sgplot data=DATA.TIDY_DATASET;
reg x= HAIRGROWTHVALUE y = age/CLM CLI;
scatter x= HAIRGROWTHVALUE y = age ;
RUN;

/* Assumption for whole dataset*/

PROC GLM data=DATA.TIDY_DATASET;
  CLASS age;
  MODEL HAIRGROWTHVALUE = age;
  OUTPUT out=DATA.obsOut p=yhat r=resid lclm= lowerCI uclm = upperCI;
RUN;
Quit;

PROC UNIVARIATE data=DATA.obsOut normaltest;
var resid;
QQPLOT resid/normal (mu=est sigma=est);
RUN;


/*-------------Fit the model with Luxuriant treatment-------------*/
/* creating the dataset for Luxuriant treatment*/
DATA DATA.DATA_Luxuriant; 
  SET DATA.TIDY_DATASET;
  WHERE Treatment = "Luxuriant";
RUN;

/* fit the model with Luxuriant dataset - General Linear model */
PROC GLM data=DATA.DATA_Luxuriant outstat=outStat_Luxuriant plots=diagnostics;
  CLASS age;
  MODEL HAIRGROWTHVALUE = age / solution clparm;
  ODS output fFitStatistics = modelFit ParameterEstimates =parEsts;
RUN;
Quit;

/* for above dataset: scatter plot with fitted linear regression with prediction interval(CLI) and  confidence interval(CLM)*/
PROC sgplot data=DATA.DATA_Luxuriant;;
reg x= HAIRGROWTHVALUE y = age/CLM CLI;
scatter x= HAIRGROWTHVALUE y = age ;
RUN;

/* Assumption for Luxuriant treatment*/
PROC GLM data=DATA.DATA_Luxuriant;
  CLASS age;
  MODEL HAIRGROWTHVALUE = age;
  OUTPUT out=DATA.obsOut_Luxuriant p=yhat r=resid lclm= lowerCI uclm = upperCI;
RUN;
Quit;

PROC UNIVARIATE data=DATA.obsOut_Luxuriant normaltest;
var resid;
QQPLOT resid/normal (mu=est sigma=est);
RUN;


/*-------------Fit the model with Placebo treatment-------------*/
/* creating the dataset for Placebo treatment*/
DATA DATA.DATA_Placebo; 
  SET DATA.TIDY_DATASET;
  WHERE Treatment = "Placebo";
RUN;

/* fit the model with Placebo dataset - General Linear model */
PROC GLM data=DATA.DATA_Placebo outstat=outStat_Placebo plots=diagnostics;
  CLASS age;
  MODEL HAIRGROWTHVALUE = age / solution clparm;
  ODS output fFitStatistics = modelFit ParameterEstimates =parEsts;
RUN;
Quit;

/* for above dataset: scatter plot with fitted linear regression with prediction interval(CLI) and  confidence interval(CLM)*/
PROC sgplot data=DATA.DATA_Placebo;
reg x= HAIRGROWTHVALUE y = age/CLM CLI;
scatter x= HAIRGROWTHVALUE y = age ;
RUN;

/* Assumption for Placebo treatment*/
PROC GLM data=DATA.DATA_Placebo;
  CLASS age;
  MODEL HAIRGROWTHVALUE = age;
  OUTPUT out=DATA.obsOut_Placebo p=yhat r=resid lclm= lowerCI uclm = upperCI;
RUN;
Quit;

PROC UNIVARIATE data=DATA.obsOut_Placebo normaltest;
var resid;
QQPLOT resid/normal (mu=est sigma=est);
RUN;


/*-------------Fit the model with BaldBeGone treatment-------------*/
/* creating the dataset for BaldBeGone treatment*/
DATA DATA.DATA_BaldBeGone; 
  SET DATA.TIDY_DATASET;
  WHERE Treatment = "BaldBeGone";
RUN;

/* fit the model with BaldBeGone dataset - General Linear model */
PROC GLM data=DATA.DATA_BaldBeGone outstat=outStat_BaldBeGone plots=diagnostics;
  CLASS age;
  MODEL HAIRGROWTHVALUE = age / solution clparm;
  ODS output fFitStatistics = modelFit ParameterEstimates =parEsts;
RUN;
Quit;

/* for above dataset: scatter plot with fitted linear regression with prediction interval(CLI) and  confidence interval(CLM)*/
PROC sgplot data=DATA.DATA_BaldBeGone;
reg x= HAIRGROWTHVALUE y = age/CLM CLI;
scatter x= HAIRGROWTHVALUE y = age ;
RUN;

/* Assumption for BaldBeGone treatment*/
PROC GLM data=DATA.DATA_BaldBeGone;
  CLASS age;
  MODEL HAIRGROWTHVALUE = age;
  OUTPUT out=DATA.obsOut_BaldBeGone p=yhat r=resid lclm= lowerCI uclm = upperCI;
RUN;
Quit;

PROC UNIVARIATE data=DATA.obsOut_BaldBeGone normaltest;
var resid;
QQPLOT resid/normal (mu=est sigma=est);
RUN;

/*-------------Fit the model with SkinheadNoMore treatment-------------*/
/* creating the dataset for SkinheadNoMore treatment*/
DATA DATA.DATA_SkinheadNoMore; 
  SET DATA.TIDY_DATASET;
  WHERE Treatment = "SkinheadNoMore";
RUN;

/* fit the model with SkinheadNoMore dataset - General Linear model */
PROC GLM data=DATA.DATA_SkinheadNoMore outstat=outStat_SkinheadNoMore plots=diagnostics;
  CLASS age;
  MODEL HAIRGROWTHVALUE = age / solution clparm;
  ODS output fFitStatistics = modelFit ParameterEstimates =parEsts;
RUN;
Quit;

/* for above dataset: scatter plot with fitted linear regression with prediction interval(CLI) and  confidence interval(CLM)*/
PROC sgplot data=DATA.DATA_SkinheadNoMore ;
reg x= HAIRGROWTHVALUE y = age/CLM CLI;
scatter x= HAIRGROWTHVALUE y = age ;
RUN;

/* Assumption for SkinheadNoMore treatment*/
PROC GLM data=DATA.DATA_SkinheadNoMore;
  CLASS age;
  MODEL HAIRGROWTHVALUE = age;
  OUTPUT out=DATA.obsOut_SkinheadNoMore p=yhat r=resid lclm= lowerCI uclm = upperCI;
RUN;
Quit;

PROC UNIVARIATE data=DATA.obsOut_SkinheadNoMore normaltest;
var resid;
QQPLOT resid/normal (mu=est sigma=est);
RUN;





```
